<!doctype html>
<html lang="zh-Hans" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">🙇‍♂️ Redis 基础 | 面试知识点整理</title><meta data-react-helmet="true" property="og:url" content="https://interview.docs.lixiangyu.xyz/redis/redis-basic"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-Hans"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="🙇‍♂️ Redis 基础 | 面试知识点整理"><meta data-react-helmet="true" name="description" content="----"><meta data-react-helmet="true" property="og:description" content="----"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://interview.docs.lixiangyu.xyz/redis/redis-basic"><link data-react-helmet="true" rel="alternate" href="https://interview.docs.lixiangyu.xyz/redis/redis-basic" hreflang="zh-Hans"><link data-react-helmet="true" rel="alternate" href="https://interview.docs.lixiangyu.xyz/redis/redis-basic" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9d41a9de.css">
<link rel="preload" href="/assets/js/runtime~main.34b21a2d.js" as="script">
<link rel="preload" href="/assets/js/main.ce3f180b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">面试知识点整理</b></a><a class="navbar__item navbar__link" href="/">主页</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">其他内容</a><ul class="dropdown__menu"><li><a href="https://blog.lixiangyu.xyz" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>个人博客<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lxy1152/docs-interview" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="请输入要搜索的内容" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">简介</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">😉 Java 基础</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🌈 Java 容器</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🐺 Java 并发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🌏 JVM</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🌱 框架使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">👊 MySQL</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">🤷‍♂️ Redis</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/redis/redis-basic">🙇‍♂️ Redis 基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/redis-implemention">🙋‍♂️ Redis 底层实现</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/redis-elimination">🙅‍♂️ Redis 淘汰策略</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/redis-persistence">🙆‍♂️ Redis 持久化策略</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/redis-transcation">💁‍♂️ Redis 事务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/troubleshooting">🤦‍♂️ 故障处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redis/redis-cluster">🧏‍♂️ Redis 集群</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🎠 中间件</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">👨‍👧‍👧 计算机网络</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🦸 操作系统</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">🏭 设计思想</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">📚 面经</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">本页总览</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">🙇‍♂️ Redis 基础</h1></header><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="什么是-redis？"></a>什么是 Redis？<a class="hash-link" href="#什么是-redis？" title="标题的直接链接">#</a></h2><p>Redis 一款内存高速缓存数据库，全称为：<strong>Re</strong>mote <strong>Di</strong>ctionary <strong>S</strong>erver（远程数据服务），使用 C 语言编写。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="为什么要使用-redis？"></a>为什么要使用 Redis？<a class="hash-link" href="#为什么要使用-redis？" title="标题的直接链接">#</a></h2><ul><li>高性能：直接从缓存中获取的速度肯定是要比从数据库中获取的速度要快的，但是需要注意的是保证数据库和缓存内容的一致性</li><li>高并发：一般像 MySQL 这类的数据库的 QPS（Query Per Second，服务器每秒可以执行的查询次数）大概都在 1w 左右（4 核 8g），但是使用 Redis 缓存之后很容易达到 10w+，甚至最高能达到 30w+（就单机 Redis 的情况，Redis 集群的话会更高）</li></ul><p>所以直接操作缓存能够承受的数据库请求数量是远远大于直接访问数据库的，那么就可以考虑把数据库中的部分数据转移到缓存中去，这样用户的一部分请求会直接到缓存这里而不用经过数据库。进而也就提高了系统整体的并发量。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-提供的数据类型有哪些？"></a>Redis 提供的数据类型有哪些？<a class="hash-link" href="#redis-提供的数据类型有哪些？" title="标题的直接链接">#</a></h2><table><thead><tr><th align="center">数据类型</th><th align="center">可以存储的值</th><th align="center">操作</th></tr></thead><tbody><tr><td align="center">STRING</td><td align="center">字符串、整数或者浮点数</td><td align="center">对整个字符串或者字符串的其中一部分执行操作，对整数和浮点数执行自增或者自减操作</td></tr><tr><td align="center">LIST</td><td align="center">列表</td><td align="center">从两端压入或者弹出元素，对单个或者多个元素进行修剪，只保留一个范围内的元素</td></tr><tr><td align="center">SET</td><td align="center">无序集合</td><td align="center">添加、获取、移除单个元素，检查一个元素是否存在于集合中，计算交集、并集、差集，从集合里面随机获取元素</td></tr><tr><td align="center">HASH</td><td align="center">包含键值对的无序散列表</td><td align="center">添加、获取、移除单个键值对，获取所有键值对，检查某个键是否存在</td></tr><tr><td align="center">ZSET</td><td align="center">有序集合</td><td align="center">添加、获取、删除元素，根据分值范围或者成员来获取元素，计算一个键的排名</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-的应用场景？"></a>Redis 的应用场景？<a class="hash-link" href="#redis-的应用场景？" title="标题的直接链接">#</a></h2><ul><li>计数器</li><li>缓存</li><li>消息队列</li><li>对话缓存</li><li>分布式锁</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-为什么速度快？"></a>Redis 为什么速度快？<a class="hash-link" href="#redis-为什么速度快？" title="标题的直接链接">#</a></h2><ul><li>采用多路 I/O 复用机制</li><li>数据结构简单，操作节省时间</li><li>运行在内存中</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-是单线程的吗？"></a>Redis 是单线程的吗？<a class="hash-link" href="#redis-是单线程的吗？" title="标题的直接链接">#</a></h2><p>虽然 Redis 是单线程模型，但是实际上 Redis 在 4.0 之后的版本中就已经加入了对多线程的支持。不过 Redis 4.0 增加的多线程主要是针对一些大键值对的删除操作的命令，使用这些命令就会使用主处理线程之外的其他线程来异步处理。</p><p>整体上来说，Redis 在 6.0 版本之前主要还是单线程处理。那 Redis 6.0 之前为什么不使用多线程呢？</p><ul><li>单线程编程容易并且更容易维护</li><li>Redis 的性能瓶颈不在 CPU，<strong>主要是内存和网络</strong></li><li>多线程就会存在死锁、线程上下文切换等问题，甚至会影响性能</li></ul><p>那为什么 Redis 6.0 之后又引入了多线程呢？主要是为了提升网络 I/O 读写性能，多线程在默认情况下是关闭的，需要通过修改配置项进行开启：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">io-threads-do-reads yes # 开启多线程</span></span><span class="token-line" style="color:#393A34"><span class="token plain">io-threads 4 # 官网建议 4 核的机器设置为 2 或 3 个线程，8 核的建议设置为 6 个线程</span></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_Ue-o clean-btn">复制</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-的操作是原子性的吗，如何保证原子性？"></a>Redis 的操作是原子性的吗，如何保证原子性？<a class="hash-link" href="#redis-的操作是原子性的吗，如何保证原子性？" title="标题的直接链接">#</a></h2><p>对于 Redis 来说，执行 <code>get</code>、<code>set</code> 以及 <code>eval</code>（使用 Lua 解释器执行脚本）等命令，都是一个一个的任务，这些任务都会由 Redis 的线程去负责执行，任务要么执行成功，要么执行失败。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="怎么保证缓存和数据库的数据一致性？"></a>怎么保证缓存和数据库的数据一致性？<a class="hash-link" href="#怎么保证缓存和数据库的数据一致性？" title="标题的直接链接">#</a></h2><ul><li>缓存失效时间变短（不推荐，治标不治本）：让缓存数据的过期时间变短，这样的话缓存就会从数据库中加载数据</li><li>增加缓存更新重试机制（常用）：如果因为缓存服务当前不可用导致缓存删除失败的话，就隔一段时间进行重试。如果多次重试还是失败的话，可以把当前更新失败的 <code>key</code> 存入队列中，等缓存服务可用之后，再将缓存中对应的 <code>key</code> 删除即可</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redis-在什么情况下会有性能问题，如何处理？"></a>Redis 在什么情况下会有性能问题，如何处理？<a class="hash-link" href="#redis-在什么情况下会有性能问题，如何处理？" title="标题的直接链接">#</a></h2><ul><li>主服务器写内存快照，<code>save</code> 命令调度 <code>rdbSave</code> 函数，会阻塞主线程的工作，当快照比较大时对性能影响是非常大的，会间断性暂停服务，所以主服务器最好不要写内存快照</li><li>主服务器 AOF 持久化，如果不重写 AOF 文件，这个持久化方式对性能的影响是最小的，但是 AOF 文件会不断增大，AOF 文件过大会影响主服务器重启的恢复速度</li><li>主服务器调用 <code>BGREWRITEAOF</code> 重写 AOF 文件会占大量的 CPU 和内存资源，导致服务过载，出现短暂服务暂停现象</li><li>Redis 主从复制也可能会有性能问题，为了主从复制的速度和连接的稳定性，从服务器和主服务器最好在同一个局域网内</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"></div><div class="col lastUpdated_3DPF">最后更新于 <b><time datetime="2021-08-16T11:30:01.000Z">2021/8/16</time></b> </div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mysql/cluster"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« 🤝 集群</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/redis/redis-implemention"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">🙋‍♂️ Redis 底层实现 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是-redis？" class="table-of-contents__link">什么是 Redis？</a></li><li><a href="#为什么要使用-redis？" class="table-of-contents__link">为什么要使用 Redis？</a></li><li><a href="#redis-提供的数据类型有哪些？" class="table-of-contents__link">Redis 提供的数据类型有哪些？</a></li><li><a href="#redis-的应用场景？" class="table-of-contents__link">Redis 的应用场景？</a></li><li><a href="#redis-为什么速度快？" class="table-of-contents__link">Redis 为什么速度快？</a></li><li><a href="#redis-是单线程的吗？" class="table-of-contents__link">Redis 是单线程的吗？</a></li><li><a href="#redis-的操作是原子性的吗，如何保证原子性？" class="table-of-contents__link">Redis 的操作是原子性的吗，如何保证原子性？</a></li><li><a href="#怎么保证缓存和数据库的数据一致性？" class="table-of-contents__link">怎么保证缓存和数据库的数据一致性？</a></li><li><a href="#redis-在什么情况下会有性能问题，如何处理？" class="table-of-contents__link">Redis 在什么情况下会有性能问题，如何处理？</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">其他内容</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.lixiangyu.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>个人博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.34b21a2d.js"></script>
<script src="/assets/js/main.ce3f180b.js"></script>
</body>
</html>